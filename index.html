<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
    <h1>Gerador de Senha</h1>
    <p>Utilize o nosso gerador online para criar uma senha forte e segura.</p>

    <!-- Text Input -->
    <input type="texto" name="senha" id="input_senha" />
    <!-- Barra deslizante -->
    <input 
        type="range" 
        name="senha-tamanho" 
        id="input_senhaRange" 
        value="16" 
        min="4" 
        max="64"
    />
    <!-- Botão comum -->
    <button id="copy">Copiar Senha</button>

    <script>
        //só executa o javascript depois que o html carregou
        document.addEventListener("DOMContentLoaded", function(event) {

            //variável que seta ou recebe valor do input
            const vResultEl = document.querySelector("#input_senha")
            //variável que controla o tamanho da quantidade de caracteres da senha
            const vSenhaTamanhoEl = document.querySelector("#input_senhaRange")
            let vSenhaTamanho = vSenhaTamanhoEl.value
            console.log(vSenhaTamanho)

            function geradorSenha(){
                const vChars = "abcdefghjkmnpqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ123456789?!@&*()[]"
                let vSenha = ""

                for(let i = 0; i < vSenhaTamanho; i++){
                    // retorna um número aleatorio entre a quantidade de caracteres de vChars
                    const vRandomNumero = Math.floor(Math.random() * vChars.length)
                    // Pega qual é o caractere da posicao retornada no random
                    vSenha += vChars.substring(vRandomNumero, vRandomNumero + 1)
                    
                    // const vRandomTeste = Math.random()
                    // console.log(`Random: `,vRandomTeste)
                    // console.log(`Tamanho: `,vChars.length)
                    // console.log(`Random x Tamanho:`, (vRandomTeste * vChars.length))
                    // console.log(`Floor: `, Math.floor(vRandomTeste * vChars.length))
                    // console.log(`----`)
                }

                vResultEl.value = vSenha
                
                //console.log(vSenha)
            }
        
            //função para copiar o texto do input text
            function copy(){
                navigator.clipboard.writeText(vResultEl.value)
            }
            //evento para fazer a cópia
            const botaoCopiarEl = document.querySelector("#copy")
            botaoCopiarEl.addEventListener("click", copy)
    
            //Criar evento slide do input range
            //declarei global... const vSenhaTamanhoEl = document.querySelector("#input_senhaRange") 
            vSenhaTamanhoEl.addEventListener("input", function(){
                vSenhaTamanho = vSenhaTamanhoEl.value
                //console.log(vSenhaTamanho)
                geradorSenha()
            })

            geradorSenha()
        });
    </script>
</body>
</html>